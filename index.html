<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Agar.io Clone - Neon Arena</title>
    <style>
        body { margin: 0; overflow: hidden; background: #050505; font-family: sans-serif; color: white; touch-action: none; }
        canvas { display: block; cursor: crosshair; }
        
        /* UI */
        #overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.85); display: flex; justify-content: center; align-items: center; z-index: 100; }
        .menu { background: #111; padding: 30px; border: 2px solid #00ffcc; border-radius: 20px; text-align: center; width: 300px; }
        input { width: 80%; padding: 10px; margin: 10px 0; background: #000; border: 1px solid #00ffcc; color: white; text-align: center; }
        .btn { width: 100%; padding: 15px; background: #00ffcc; border: none; font-weight: bold; cursor: pointer; margin-top: 10px; }
        #ad-box { margin-top: 15px; height: 100px; border: 1px dashed #444; }
        
        .skin-list { display: flex; justify-content: center; gap: 10px; margin-bottom: 10px; font-size: 24px; cursor: pointer; }
        .skin.active { transform: scale(1.3); text-shadow: 0 0 10px #00ffcc; }
    </style>
</head>
<body>

    <div id="overlay">
        <div class="menu">
            <h1 style="color:#00ffcc; margin:0">NEON AGAR</h1>
            <input type="text" id="nick" placeholder="Enter Nickname" maxlength="10">
            <div class="skin-list">
                <span class="skin active" onclick="selectSkin(this, 'ðŸ‡¹ðŸ‡·')">ðŸ‡¹ðŸ‡·</span>
                <span class="skin" onclick="selectSkin(this, 'ðŸ‡ºðŸ‡¸')">ðŸ‡ºðŸ‡¸</span>
                <span class="skin" onclick="selectSkin(this, 'âš½')">âš½</span>
                <span class="skin" onclick="selectSkin(this, 'ðŸ‘½')">ðŸ‘½</span>
            </div>
            <button class="btn" onclick="startGame()">PLAY</button>
            <div id="ad-box">
                <iframe id="ad-frame" width="300" height="100" frameborder="0" scrolling="no"></iframe>
            </div>
        </div>
    </div>

    <canvas id="game"></canvas>

<script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');
    const adLink = "https://omg10.com/4/10619187";

    let gameActive = false, score = 0;
    let mouse = { x: 0, y: 0 };
    let player = { x: 0, y: 0, r: 20, color: 'ðŸ‡¹ðŸ‡·' };
    let foods = [], enemies = [];
    const flags = ['ðŸ‡ºðŸ‡¸', 'ðŸ‡©ðŸ‡ª', 'ðŸ‡¬ðŸ‡§', 'ðŸ‡§ðŸ‡·', 'ðŸ‡¯ðŸ‡µ', 'ðŸ‡«ðŸ‡·'];

    function selectSkin(el, s) {
        document.querySelectorAll('.skin').forEach(x => x.classList.remove('active'));
        el.classList.add('active');
        player.color = s;
    }

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    // Mouse ve Touch takibi
    window.addEventListener('mousemove', e => { mouse.x = e.clientX; mouse.y = e.clientY; });
    window.addEventListener('touchmove', e => { mouse.x = e.touches[0].clientX; mouse.y = e.touches[0].clientY; }, {passive: false});

    function init() {
        player.x = canvas.width / 2;
        player.y = canvas.height / 2;
        player.r = 25;
        foods = [];
        enemies = [];
        // Yemekleri oluÅŸtur
        for(let i=0; i<100; i++) spawnFood();
        // BotlarÄ± oluÅŸtur
        for(let i=0; i<5; i++) spawnEnemy();
    }

    function spawnFood() {
        foods.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            r: 4,
            color: `hsl(${Math.random() * 360}, 70%, 60%)`
        });
    }

    function spawnEnemy() {
        enemies.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height,
            r: 15 + Math.random() * 40,
            color: flags[Math.floor(Math.random() * flags.length)],
            vx: (Math.random() - 0.5) * 2,
            vy: (Math.random() - 0.5) * 2
        });
    }

    function startGame() {
        init();
        gameActive = true;
        document.getElementById('overlay').style.display = 'none';
        document.getElementById('ad-frame').src = "about:blank";
        requestAnimationFrame(update);
    }

    function gameOver() {
        gameActive = false;
        document.getElementById('overlay').style.display = 'flex';
        document.getElementById('ad-frame').src = adLink;
    }

    function update() {
        if(!gameActive) return;

        ctx.fillStyle = '#050505';
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // Grid Ã§izimi (Agar.io havasÄ± iÃ§in)
        ctx.strokeStyle = '#111';
        ctx.lineWidth = 1;
        for(let i=0; i<canvas.width; i+=50) { ctx.beginPath(); ctx.moveTo(i,0); ctx.lineTo(i,canvas.height); ctx.stroke(); }
        for(let i=0; i<canvas.height; i+=50) { ctx.beginPath(); ctx.moveTo(0,i); ctx.lineTo(canvas.width,i); ctx.stroke(); }

        // Oyuncu Hareketi (YavaÅŸlama kuralÄ±yla)
        let speed = Math.max(1.5, 5 - (player.r / 50)); 
        let dx = mouse.x - player.x;
        let dy = mouse.y - player.y;
        let dist = Math.hypot(dx, dy);
        
        if(dist > 5) {
            player.x += (dx / dist) * speed;
            player.y += (dy / dist) * speed;
        }

        // SÄ±nÄ±r KontrolÃ¼
        player.x = Math.max(player.r, Math.min(canvas.width - player.r, player.x));
        player.y = Math.max(player.r, Math.min(canvas.height - player.r, player.y));

        // Yemekleri Ã‡iz ve Ye
        foods.forEach((f, i) => {
            ctx.fillStyle = f.color;
            ctx.beginPath(); ctx.arc(f.x, f.y, f.r, 0, Math.PI*2); ctx.fill();

            if(Math.hypot(player.x - f.x, player.y - f.y) < player.r) {
                foods.splice(i, 1);
                player.r += 0.5;
                spawnFood();
            }
        });

        // DÃ¼ÅŸmanlarÄ± (BotlarÄ±) Ã‡iz ve Kontrol Et
        enemies.forEach((e, i) => {
            e.x += e.vx; e.y += e.vy;
            if(e.x < 0 || e.x > canvas.width) e.vx *= -1;
            if(e.y < 0 || e.y > canvas.height) e.vy *= -1;

            ctx.font = `${e.r * 1.2}px Arial`;
            ctx.textAlign = "center"; ctx.textBaseline = "middle";
            ctx.fillText(e.color, e.x, e.y);

            let d = Math.hypot(player.x - e.x, player.y - e.y);
            if(d < player.r + e.r - 10) {
                if(player.r > e.r * 1.1) { // Sen bÃ¼yÃ¼ksen onu ye
                    player.r += e.r / 4;
                    enemies.splice(i, 1);
                    setTimeout(spawnEnemy, 2000);
                } else if(e.r > player.r * 1.1) { // O bÃ¼yÃ¼kse seni yer
                    gameOver();
                }
            }
        });

        // Oyuncuyu Ã‡iz
        ctx.font = `${player.r * 1.2}px Arial`;
        ctx.textAlign = "center"; ctx.textBaseline = "middle";
        ctx.fillText(player.color, player.x, player.y);

        requestAnimationFrame(update);
    }
</script>
</body>
</html>
