<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Ghost: Global Edition</title>
    <style>
        :root { --neon: #ff00ff; --cyan: #00ffff; --bg: #050505; }
        body { margin: 0; overflow: hidden; background: var(--bg); font-family: 'Segoe UI', sans-serif; touch-action: none; user-select: none; color: white; }
        canvas { display: block; filter: blur(0.5px); }

        /* Arayüz Elemanları */
        #ui { position: absolute; top: 20px; width: 100%; text-align: center; pointer-events: none; z-index: 10; }
        #score { font-size: 60px; font-weight: 900; color: #fff; text-shadow: 0 0 15px var(--neon); }

        #overlay { 
            position: absolute; inset: 0; background: rgba(0,0,0,0.95); 
            display: flex; flex-direction: column; justify-content: center; 
            align-items: center; z-index: 100;
        }
        
        .menu-box { 
            background: #111; padding: 25px; border-radius: 20px; 
            border: 2px solid var(--neon); text-align: center; width: 320px;
            box-shadow: 0 0 40px rgba(255,0,255,0.15);
        }

        input { 
            width: 80%; padding: 12px; margin: 15px 0; border-radius: 10px; border: 1px solid var(--cyan);
            background: #000; color: #fff; text-align: center; font-size: 16px; outline: none;
        }

        .btn { 
            padding: 12px 30px; font-size: 18px; border: none; border-radius: 10px; 
            font-weight: bold; cursor: pointer; transition: 0.3s; width: 90%; margin-bottom: 10px;
        }
        
        #start-btn { background: var(--neon); color: #fff; box-shadow: 0 0 15px var(--neon); }
        #share-btn { background: #25D366; color: #fff; display: none; }

        .leaderboard { 
            margin: 15px 0; background: #000; padding: 10px; border-radius: 10px; 
            font-size: 13px; text-align: left; border: 1px solid #333;
        }
        .lb-row { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid #222; }
        .lb-row.me { color: var(--cyan); font-weight: bold; }

        #ad-box { margin-top: 15px; width: 100%; height: 100px; }
    </style>
</head>
<body onpointerdown="teleport()">

    <div id="ui"><div id="score">0</div></div>

    <div id="overlay">
        <div class="menu-box">
            <h2 id="m-title" style="margin:0; color:var(--cyan)">NEON GHOST</h2>
            
            <div id="nick-section">
                <input type="text" id="nickname" placeholder="Nickname Gir..." maxlength="12">
            </div>

            <div id="leaderboard-section" class="leaderboard" style="display:none">
                <div style="text-align:center; font-weight:bold; margin-bottom:5px; color:var(--neon)">DÜNYA SIRALAMASI</div>
                <div id="lb-content"></div>
            </div>

            <button id="start-btn" class="btn" onclick="event.stopPropagation(); startGame()">OYNA</button>
            <button id="share-btn" class="btn" onclick="event.stopPropagation(); shareScore()">SKORU PAYLAŞ</button>

            <div id="ad-box">
                <iframe id="ad-frame" width="300" height="100" frameborder="0" scrolling="no"></iframe>
            </div>
        </div>
    </div>

    <canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const adFrame = document.getElementById('ad-frame');
    const adLink = "https://omg10.com/4/10619187";
    
    let score = 0, bestScore = 0, gameActive = false, nickname = "";
    let playerRadius = 130, targetRadius = 130, angle = 0;
    let obstacles = [];
    let gameSpeed = 1;

    // LocalStorage'dan nickname çek
    if(localStorage.getItem('ghostNick')) {
        document.getElementById('nickname').value = localStorage.getItem('ghostNick');
    }

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    function startGame() {
        nickname = document.getElementById('nickname').value || "Anonim";
        localStorage.setItem('ghostNick', nickname);
        
        score = 0; gameSpeed = 1; obstacles = []; gameActive = true;
        document.getElementById('score').innerText = "0";
        document.getElementById('overlay').style.display = 'none';
        document.getElementById('nick-section').style.display = 'none';
        adFrame.src = "about:blank";
        
        spawnObstacle();
        requestAnimationFrame(update);
    }

    function teleport() {
        if(!gameActive) return;
        targetRadius = (targetRadius === 130) ? 75 : 130;
    }

    function spawnObstacle() {
        if(!gameActive) return;
        let isInner = Math.random() > 0.5;
        // Başlangıçta daha seyrek, puan arttıkça daha sık engel
        let delay = Math.max(500, 1500 - (score * 30));
        
        obstacles.push({
            angle: 0,
            orbit: isInner ? 75 : 130,
            speed: (0.02 + Math.random() * 0.015) * gameSpeed,
            size: 25
        });
        setTimeout(spawnObstacle, delay);
    }

    function gameOver() {
        gameActive = false;
        document.getElementById('overlay').style.display = 'flex';
        document.getElementById('leaderboard-section').style.display = 'block';
        document.getElementById('share-btn').style.display = 'block';
        document.getElementById('m-title').innerText = "YANDIN!";
