<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Neon Ghost: World Tour</title>
    <style>
        :root { --neon: #ff00ff; --cyan: #00ffff; --bg: #050505; }
        body { margin: 0; overflow: hidden; background: var(--bg); font-family: 'Segoe UI', sans-serif; touch-action: none; user-select: none; color: white; }
        canvas { display: block; }

        /* UI */
        #ui { position: absolute; top: 20px; width: 100%; text-align: center; pointer-events: none; z-index: 10; }
        #score { font-size: 60px; font-weight: 900; color: #fff; text-shadow: 0 0 15px var(--neon); }

        #overlay { 
            position: absolute; inset: 0; background: rgba(0,0,0,0.95); 
            display: flex; flex-direction: column; justify-content: center; 
            align-items: center; z-index: 100; padding: 20px;
        }
        
        .menu-box { 
            background: #111; padding: 25px; border-radius: 20px; 
            border: 2px solid var(--neon); text-align: center; width: 320px;
        }

        input { 
            width: 80%; padding: 10px; margin: 10px 0; border-radius: 8px; border: 1px solid var(--cyan);
            background: #000; color: #fff; text-align: center; font-size: 16px;
        }

        /* Skin Selection */
        .skin-label { font-size: 12px; color: var(--cyan); margin-bottom: 5px; text-transform: uppercase; }
        .skin-container { display: flex; justify-content: center; gap: 10px; margin: 10px 0; flex-wrap: wrap; }
        .skin { 
            width: 40px; height: 40px; border-radius: 50%; cursor: pointer; 
            border: 2px solid #333; display: flex; align-items: center; 
            justify-content: center; font-size: 22px; transition: 0.2s;
            background: #1a1a1a;
        }
        .skin.active { border-color: var(--neon); transform: scale(1.1); box-shadow: 0 0 15px var(--neon); }

        .btn { 
            padding: 15px; font-size: 18px; border: none; border-radius: 10px; 
            font-weight: bold; cursor: pointer; width: 100%; margin-top: 10px;
        }
        #start-btn { background: var(--neon); color: white; }
        #revive-btn { background: #ffcc00; color: black; display: none; }

        .leaderboard { margin: 15px 0; background: #000; padding: 10px; border-radius: 10px; font-size: 12px; border: 1px solid #222; }
        .lb-row { display: flex; justify-content: space-between; padding: 3px 0; border-bottom: 1px solid #111; }
        
        #ad-box { margin-top: 15px; border: 1px dashed #444; height: 100px; }
    </style>
</head>
<body onpointerdown="teleport()">

    <div id="ui"><div id="score">0</div></div>

    <div id="overlay">
        <div class="menu-box">
            <h2 style="margin:0; color:var(--cyan)">NEON GHOST</h2>
            
            <input type="text" id="nickname" placeholder="Your Nickname" maxlength="12">

            <div class="skin-label">Select Character</div>
            <div class="skin-container" id="skin-picker">
                <div class="skin active" data-val="ðŸ‘»">ðŸ‘»</div>
                <div class="skin" data-val="ðŸ‡¹ðŸ‡·">ðŸ‡¹ðŸ‡·</div>
                <div class="skin" data-val="ðŸ‡ºðŸ‡¸">ðŸ‡ºðŸ‡¸</div>
                <div class="skin" data-val="ðŸ‡©ðŸ‡ª">ðŸ‡©ðŸ‡ª</div>
                <div class="skin" data-val="âš½">âš½</div>
                <div class="skin" data-val="ðŸ‘½">ðŸ‘½</div>
            </div>

            <div id="leaderboard" class="leaderboard">
                <div id="lb-content"></div>
            </div>

            <button id="revive-btn" class="btn" onclick="event.stopPropagation(); watchAd()">CONTINUE (WATCH AD)</button>
            <button id="start-btn" class="btn" onclick="event.stopPropagation(); startGame()">START GAME</button>

            <div id="ad-box">
                <iframe id="ad-frame" width="300" height="100" frameborder="0" scrolling="no"></iframe>
            </div>
        </div>
    </div>

    <canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const adFrame = document.getElementById('ad-frame');
    const adLink = "https://omg10.com/4/10619187";
    
    let score = 0, gameActive = false, nickname = "", canRevive = true;
    let playerRadius = 130, targetRadius = 130, angle = 0, obstacles = [], gameSpeed = 1;
    let selectedSkin = "ðŸ‘»";

    document.querySelectorAll('.skin').forEach(s => {
        s.addEventListener('click', (e) => {
            e.stopPropagation();
            document.querySelectorAll('.skin').forEach(sk => sk.classList.remove('active'));
            s.classList.add('active');
            selectedSkin = s.dataset.val;
        });
    });

    function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    function startGame() {
        nickname = document.getElementById('nickname').value || "Player";
        score = 0; gameSpeed = 0.8; obstacles = []; gameActive = true; canRevive = true;
        document.getElementById('score').innerText = "0";
        document.getElementById('overlay').style.display = 'none';
        adFrame.src = "about:blank";
        requestAnimationFrame(update);
        spawnObstacle();
    }

    function watchAd() {
        window.open(adLink, '_blank');
        canRevive = false;
        gameActive = true;
        obstacles = [];
        document.getElementById('overlay').style.display = 'none';
        requestAnimationFrame(update);
    }

    function teleport() { if(gameActive) targetRadius = (targetRadius === 130) ? 75 : 130; }

    function spawnObstacle() {
        if(!gameActive) return;
        // Daha kolay: Engel aralÄ±ÄŸÄ± 1.5 saniyeden baÅŸlÄ±yor
        let delay = Math.max(700, 1800 - (score * 30));
        obstacles.push({
            angle: 0, orbit: Math.random() > 0.5 ? 75 : 130,
            speed: (0.015 + Math.random() * 0.01) * gameSpeed, size: 22
        });
        setTimeout(spawnObstacle, delay);
    }

    function gameOver() {
        gameActive = false;
        document.getElementById('overlay').style.display = 'flex';
        document.getElementById('revive-btn').style.display = canRevive ? 'block' : 'none';
        updateLeaderboard();
        adFrame.src = adLink;
    }

    function updateLeaderboard() {
        const lb = document.getElementById('lb-content');
        let data = [{n:"Ghost",s:50},{n:nickname,s:score,me:true},{n:"Player1",s:20}].sort((a,b)=>b.s-a.s);
        lb.innerHTML = data.map(e=>`<div class="lb-row ${e.me?'me':''}"><span>${e.n}</span><span>${e.s}</span></div>`).join('');
    }

    function update() {
        if(!gameActive) return;
        ctx.fillStyle = "rgba(5, 5, 5, 0.2)";
        ctx.fillRect(0,0,canvas.width, canvas.height);

        const cx = canvas.width / 2, cy = canvas.height / 2;
        playerRadius += (targetRadius - playerRadius) * 0.2; // Daha hÄ±zlÄ± Ä±ÅŸÄ±nlanma
        angle += 0.02 * gameSpeed;
        
        let px = cx + Math.cos(angle) * playerRadius;
        let py = cy + Math.sin(angle) * playerRadius;

        // Player with Character
        ctx.shadowBlur = 15; ctx.shadowColor = varColor();
        ctx.fillStyle = "#fff";
        ctx.font = "24px Arial"; ctx.textAlign = "center"; ctx.textBaseline = "middle";
        ctx.fillText(selectedSkin, px
