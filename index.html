<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NEON.IO - Battle Arena</title>
    <style>
        :root { --neon: #00ffcc; --bg: #050505; }
        body { margin: 0; overflow: hidden; background: var(--bg); font-family: 'Arial', sans-serif; touch-action: none; user-select: none; color: white; }
        canvas { display: block; position: absolute; z-index: 1; }

        /* UI Elements */
        #ui-layer { position: absolute; top: 10px; left: 10px; z-index: 10; pointer-events: none; width: 100%; }
        #leaderboard-mini { position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.5); padding: 10px; border-radius: 5px; font-size: 12px; border: 1px solid var(--neon); }
        .lb-entry { display: flex; justify-content: space-between; gap: 20px; margin-bottom: 2px; }
        .lb-me { color: var(--neon); font-weight: bold; }

        #overlay { 
            position: absolute; inset: 0; background: rgba(0,0,0,0.9); 
            display: flex; flex-direction: column; justify-content: center; 
            align-items: center; z-index: 1000; 
        }
        
        .menu-box { 
            background: #111; padding: 20px; border-radius: 20px; 
            border: 2px solid var(--neon); text-align: center; width: 300px;
        }

        .btn { padding: 15px; font-size: 18px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 10px; }
        #start-btn { background: var(--neon); color: #000; }
        
        #ad-box { margin-top: 15px; height: 100px; border: 1px dashed #444; }
        .skin-picker { display: flex; justify-content: center; gap: 10px; margin: 10px 0; font-size: 24px; cursor: pointer; }
        .skin.active { transform: scale(1.3); text-shadow: 0 0 10px var(--neon); }
    </style>
</head>
<body onpointerdown="shift(event)">

    <div id="ui-layer">
        <div id="leaderboard-mini"></div>
    </div>

    <div id="overlay">
        <div class="menu-box">
            <h2 style="color:var(--neon); margin:0">NEON.IO</h2>
            <p style="font-size:12px; color:#666">Shift between orbits to destroy others!</p>
            
            <div class="skin-picker">
                <span class="skin active" onclick="setSkin(this, 'ðŸ‡¹ðŸ‡·')">ðŸ‡¹ðŸ‡·</span>
                <span class="skin" onclick="setSkin(this, 'ðŸ‡ºðŸ‡¸')">ðŸ‡ºðŸ‡¸</span>
                <span class="skin" onclick="setSkin(this, 'ðŸ‡©ðŸ‡ª')">ðŸ‡©ðŸ‡ª</span>
                <span class="skin" onclick="setSkin(this, 'ðŸ‡¬ðŸ‡§')">ðŸ‡¬ðŸ‡§</span>
                <span class="skin" onclick="setSkin(this, 'ðŸ‡§ðŸ‡·')">ðŸ‡§ðŸ‡·</span>
            </div>

            <button id="start-btn" class="btn" onclick="startGame(event)">ENTER ARENA</button>

            <div id="ad-box">
                <iframe id="ad-frame" width="300" height="100" frameborder="0" scrolling="no"></iframe>
            </div>
        </div>
    </div>

    <canvas id="gameCanvas"></canvas>

<script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const adLink = "https://omg10.com/4/10619187";
    
    let gameActive = false, score = 0;
    let player = { orbit: 130, targetOrbit: 130, angle: 0, skin: 'ðŸ‡¹ðŸ‡·', size: 1.0 };
    let bots = [];
    const flags = ['ðŸ‡ºðŸ‡¸', 'ðŸ‡©ðŸ‡ª', 'ðŸ‡¬ðŸ‡§', 'ðŸ‡§ðŸ‡·', 'ðŸ‡«ðŸ‡·', 'ðŸ‡¯ðŸ‡µ', 'ðŸ‡®ðŸ‡¹'];

    function setSkin(el, s) {
        document.querySelectorAll('.skin').forEach(x => x.classList.remove('active'));
        el.classList.add('active');
        player.skin = s;
    }

    function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
    window.addEventListener('resize', resize); resize();

    function spawnBots() {
        bots = [];
        for(let i=0; i<8; i++) {
            bots.push({
                angle: Math.random() * Math.PI * 2,
                orbit: Math.random() > 0.5 ? 75 : 130,
                skin: flags[Math.floor(Math.random()*flags.length)],
                speed: 0.01 + Math.random() * 0.02,
                active: true
            });
        }
    }

    function startGame(e) {
        if(e) e.stopPropagation();
        score = 0; player.size = 1.0; player.angle = 0;
        spawnBots();
        gameActive = true;
        document.getElementById('overlay').style.display = 'none';
        document.getElementById('ad-frame').src = "about:blank";
        requestAnimationFrame(update);
    }

    function shift(e) {
        if(!gameActive) return;
        player.targetOrbit = (player.targetOrbit === 130) ? 75 : 130;
    }

    function updateLeaderboard() {
        const lb = document.getElementById('leaderboard-mini');
        let list = bots.map(b => ({n: b.skin + " Bot", s: Math.floor(Math.random()*20)}));
        list.push({n: player.skin + " YOU", s: score, me: true});
        list.sort((a,b) => b.s - a.s);
        lb.innerHTML = list.slice(0,5).map(i => `<div class="lb-entry ${i.me?'lb-me':''}"><span>${i.n}</span><span>${i.s}k</span></div>`).join('');
    }

    function update() {
        if(!gameActive) return;
        ctx.fillStyle = "rgba(5, 5, 5, 0.2)";
        ctx.fillRect(0,0,canvas.width, canvas.height);

        const cx = canvas.width/2, cy = canvas.height/2;

        // Player Orbit Animation
        player.orbit += (player.targetOrbit - player.orbit) * 0.15;
        player.angle += 0.025;
        let px = cx + Math.cos(player.angle) * player.orbit;
        let py = cy + Math.sin(player.angle) * player.orbit;

        // Draw Player
        ctx.font = `${24 * player.size}px Arial`;
        ctx.textAlign = "center"; ctx.textBaseline = "middle";
        ctx.fillText(player.skin, px, py);

        // Update Bots
        bots.forEach((b, index) => {
            if(!b.active) return;
            b.angle += b.speed;
            let bx = cx + Math.cos(b.angle) * b.orbit;
            let by = cy + Math.sin(b.angle) * b.orbit;

            // Draw Bot
            ctx.font = "24px Arial";
            ctx.globalAlpha = 0.8;
            ctx.fillText(b.skin, bx, by);
            ctx.globalAlpha = 1.0;

            // Collision Detection (Agar.io Logic)
            let dist = Math.hypot(px - bx, py - by);
            if(dist < 25) {
                // EÄŸer aynÄ± yÃ¶rÃ¼ngedelerse ve sen shift yapÄ±yorsan onu "yiyorsun"
                if(player.orbit > 120 && b.orbit > 120 || player.orbit < 80 && b.orbit < 80) {
                    b.active = false;
                    score += 1;
                    player.size += 0.05; // BÃ¼yÃ¼me mekaniÄŸi!
                    setTimeout(() => { b.active = true; b.angle = player.angle + Math.PI; }, 2000);
                } else {
                    // YanlÄ±ÅŸ yÃ¶rÃ¼ngede Ã§arpÄ±ÅŸÄ±rsan Ã¶lÃ¼rsÃ¼n (Slither logic)
                    gameActive = false;
                    document.getElementById('overlay').style.display = 'flex';
                    document.getElementById('ad-frame').src = adLink;
                }
            }
        });

        if(score % 5 === 0) updateLeaderboard();
        requestAnimationFrame(update);
    }
    updateLeaderboard();
</script>
</body>
</html>
